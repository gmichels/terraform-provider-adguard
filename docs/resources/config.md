---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "adguard_config Resource - adguard"
subcategory: ""
description: |-
  
---

# adguard_config (Resource)



## Example Usage

```terraform
# manage the server configuration
# NOTE: there can only be 1 (one) `adguard_config` resource
# specifying multiple resources will result in errors
resource "adguard_config" "test" {
  filtering = {
    update_interval = 1
  }

  safebrowsing = true

  safesearch = {
    enabled  = true
    services = ["bing", "youtube", "google"]
  }

  querylog = {
    enabled             = false
    interval            = 8
    anonymize_client_ip = true
    ignored             = ["test2.com", "example2.com"]
  }

  stats = {
    enabled  = false
    interval = 2
    ignored  = ["test3.net", "example4.com"]
  }

  blocked_services = ["youtube", "pinterest"]

  dns = {
    upstream_dns        = ["https://1.1.1.1/dns-query", "https://1.0.0.1/dns-query"]
    rate_limit          = 30
    cache_ttl_min       = 600
    cache_ttl_max       = 86400
    cache_optimistic    = true
    blocking_mode       = "custom_ip"
    blocking_ipv4       = "1.2.3.4"
    blocking_ipv6       = "fe80::"
    local_ptr_upstreams = ["192.168.0.1", "192.168.0.2"]
    allowed_clients     = ["allowed-client", "192.168.200.200"]
  }

  dhcp = {
    interface = "eth1"

    ipv4_settings = {
      gateway_ip     = "192.168.250.1"
      subnet_mask    = "255.255.255.0"
      range_start    = "192.168.250.10"
      range_end      = "192.168.250.100"
      lease_duration = 7200
    }

    static_leases = [
      {
        mac      = "00:11:22:33:44:55"
        ip       = "192.168.250.20"
        hostname = "test-lease-1"
      },
      {
        mac      = "aa:bb:cc:dd:ee:ff"
        ip       = "192.168.250.30"
        hostname = "test-lease-2"
      }
    ]
  }

  tls = {
    enabled           = true
    server_name       = "Test AdGuard Home"
    certificate_chain = "/opt/adguardhome/ssl/chain.crt"
    private_key       = "/opt/adguardhome/ssl/server.key"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `blocked_services` (Set of String) Set of services to be blocked globally
- `blocked_services_pause_schedule` (Attributes) Sets periods of inactivity for filtering blocked services. The schedule contains 7 days (Sunday to Saturday) and a time zone. (see [below for nested schema](#nestedatt--blocked_services_pause_schedule))
- `dhcp` (Attributes) (see [below for nested schema](#nestedatt--dhcp))
- `dns` (Attributes) (see [below for nested schema](#nestedatt--dns))
- `filtering` (Attributes) (see [below for nested schema](#nestedatt--filtering))
- `parental_control` (Boolean) Whether Parental Control is enabled. Defaults to `false`
- `querylog` (Attributes) (see [below for nested schema](#nestedatt--querylog))
- `safebrowsing` (Boolean) Whether Safe Browsing is enabled. Defaults to `false`
- `safesearch` (Attributes) (see [below for nested schema](#nestedatt--safesearch))
- `stats` (Attributes) (see [below for nested schema](#nestedatt--stats))
- `tls` (Attributes) (see [below for nested schema](#nestedatt--tls))

### Read-Only

- `id` (String) Internal identifier for this config
- `last_updated` (String) Timestamp of the last Terraform update of the config

<a id="nestedatt--blocked_services_pause_schedule"></a>
### Nested Schema for `blocked_services_pause_schedule`

Optional:

- `fri` (Attributes) Paused service blocking interval for `Friday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--fri))
- `mon` (Attributes) Paused service blocking interval for `Monday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--mon))
- `sat` (Attributes) Paused service blocking interval for `Saturday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--sat))
- `sun` (Attributes) Paused service blocking interval for `Sunday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--sun))
- `thu` (Attributes) Paused service blocking interval for `Thursday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--thu))
- `time_zone` (String) Time zone name according to IANA time zone database. For example `America/New_York`. `Local` represents the system's local time zone.
- `tue` (Attributes) Paused service blocking interval for `Tueday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--tue))
- `wed` (Attributes) Paused service blocking interval for `Wednesday` (see [below for nested schema](#nestedatt--blocked_services_pause_schedule--wed))

<a id="nestedatt--blocked_services_pause_schedule--fri"></a>
### Nested Schema for `blocked_services_pause_schedule.fri`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format


<a id="nestedatt--blocked_services_pause_schedule--mon"></a>
### Nested Schema for `blocked_services_pause_schedule.mon`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format


<a id="nestedatt--blocked_services_pause_schedule--sat"></a>
### Nested Schema for `blocked_services_pause_schedule.sat`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format


<a id="nestedatt--blocked_services_pause_schedule--sun"></a>
### Nested Schema for `blocked_services_pause_schedule.sun`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format


<a id="nestedatt--blocked_services_pause_schedule--thu"></a>
### Nested Schema for `blocked_services_pause_schedule.thu`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format


<a id="nestedatt--blocked_services_pause_schedule--tue"></a>
### Nested Schema for `blocked_services_pause_schedule.tue`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format


<a id="nestedatt--blocked_services_pause_schedule--wed"></a>
### Nested Schema for `blocked_services_pause_schedule.wed`

Optional:

- `end` (String) End of paused service blocking schedule, in HH:MM format
- `start` (String) Start of paused service blocking schedule, in HH:MM format



<a id="nestedatt--dhcp"></a>
### Nested Schema for `dhcp`

Required:

- `interface` (String) The interface to use for the DHCP server

Optional:

- `enabled` (Boolean) Whether the DHCP server is enabled. Defaults to `false`
- `ipv4_settings` (Attributes) (see [below for nested schema](#nestedatt--dhcp--ipv4_settings))
- `ipv6_settings` (Attributes) (see [below for nested schema](#nestedatt--dhcp--ipv6_settings))
- `static_leases` (Attributes Set) Static leases for the DHCP server (see [below for nested schema](#nestedatt--dhcp--static_leases))

<a id="nestedatt--dhcp--ipv4_settings"></a>
### Nested Schema for `dhcp.ipv4_settings`

Required:

- `gateway_ip` (String) The gateway IP for the DHCP server scope
- `range_end` (String) The start range for the DHCP server scope
- `range_start` (String) The start range for the DHCP server scope
- `subnet_mask` (String) The subnet mask for the DHCP server scope

Optional:

- `lease_duration` (Number) The lease duration for the DHCP server scope, in seconds. Defaults to `0`


<a id="nestedatt--dhcp--ipv6_settings"></a>
### Nested Schema for `dhcp.ipv6_settings`

Required:

- `range_start` (String) The start range for the DHCP server scope

Optional:

- `lease_duration` (Number) The lease duration for the DHCP server scope, in seconds. Defaults to `86400`


<a id="nestedatt--dhcp--static_leases"></a>
### Nested Schema for `dhcp.static_leases`

Required:

- `hostname` (String) Hostname associated with the static lease
- `ip` (String) IP address associated with the static lease
- `mac` (String) MAC address associated with the static lease



<a id="nestedatt--dns"></a>
### Nested Schema for `dns`

Optional:

- `allowed_clients` (Set of String) The allowlist of clients: IP addresses, CIDRs, or ClientIDs
- `blocked_hosts` (Set of String) Disallowed domains. Defaults to the ones supplied by the default AdGuard Home configuration
- `blocked_response_ttl` (Number) How many seconds the clients should cache a filtered response. Defaults to `10`
- `blocking_ipv4` (String) When `blocking_mode` is set to `custom_ip`, the IPv4 address to be returned for a blocked A request
- `blocking_ipv6` (String) When `blocking_mode` is set to `custom_ip`, the IPv6 address to be returned for a blocked A request
- `blocking_mode` (String) DNS response sent when request is blocked. Valid values are `default` (the default), `refused`, `nxdomain`, `null_ip` or `custom_ip`
- `bootstrap_dns` (List of String) Booststrap DNS servers. Defaults to the ones supplied by the default AdGuard Home configuration
- `cache_optimistic` (Boolean) Whether optimistic DNS caching is enabled. Defaults to `false`
- `cache_size` (Number) DNS cache size (in bytes). Defaults to `4194304`
- `cache_ttl_max` (Number) Overridden maximum TTL (in seconds) received from upstream DNS servers. Defaults to `0`
- `cache_ttl_min` (Number) Overridden minimum TTL (in seconds) received from upstream DNS servers. Defaults to `0`
- `disable_ipv6` (Boolean) Whether dropping of all IPv6 DNS queries is enabled. Defaults to `false`
- `disallowed_clients` (Set of String) The blocklist of clients: IP addresses, CIDRs, or ClientIDs
- `dnssec_enabled` (Boolean) Whether outgoing DNSSEC is enabled. Defaults to `false`
- `edns_cs_custom_ip` (String) The custom IP for EDNS Client Subnet (ECS)
- `edns_cs_enabled` (Boolean) Whether EDNS Client Subnet (ECS) is enabled. Defaults to `false`
- `edns_cs_use_custom` (Boolean) Whether EDNS Client Subnet (ECS) is using a custom IP. Defaults to `false`
- `fallback_dns` (List of String) Fallback DNS servers
- `local_ptr_upstreams` (Set of String) Set of private reverse DNS servers
- `protection_enabled` (Boolean) Whether protection is enabled. Defaults to `true`
- `rate_limit` (Number) The number of requests per second allowed per client. Defaults to `20`
- `rate_limit_subnet_len_ipv4` (Number) Subnet prefix length for IPv4 addresses used for rate limiting. Defaults to `24`
- `rate_limit_subnet_len_ipv6` (Number) Subnet prefix length for IPv6 addresses used for rate limiting. Defaults to `56`
- `rate_limit_whitelist` (List of String) IP addresses excluded from rate limiting
- `resolve_clients` (Boolean) Whether reverse DNS resolution of clients' IP addresses is enabled. Defaults to `true`
- `upstream_dns` (List of String) Upstream DNS servers. Defaults to the ones supplied by the default AdGuard Home configuration
- `upstream_mode` (String) Upstream DNS resolvers usage strategy. Valid values are `load_balance` (default), `parallel` and `fastest_addr`
- `use_private_ptr_resolvers` (Boolean) Whether to use private reverse DNS resolvers. Defaults to `true`


<a id="nestedatt--filtering"></a>
### Nested Schema for `filtering`

Optional:

- `enabled` (Boolean) Whether DNS filtering is enabled. Defaults to `true`
- `update_interval` (Number) Update interval for all list-based filters, in hours. Defaults to `24`


<a id="nestedatt--querylog"></a>
### Nested Schema for `querylog`

Optional:

- `anonymize_client_ip` (Boolean) Whether anonymizing clients' IP addresses is enabled. Defaults to `false`
- `enabled` (Boolean) Whether the query log is enabled. Defaults to `true`
- `ignored` (Set of String) Set of host names which should not be written to log
- `interval` (Number) Time period for query log rotation, in hours. Defaults to `2160` (90 days)


<a id="nestedatt--safesearch"></a>
### Nested Schema for `safesearch`

Optional:

- `enabled` (Boolean) Whether Safe Search is enabled. Defaults to `false`
- `services` (Set of String) Services which SafeSearch is enabled.


<a id="nestedatt--stats"></a>
### Nested Schema for `stats`

Optional:

- `enabled` (Boolean) Whether server statistics are enabled. Defaults to `true`
- `ignored` (Set of String) Set of host names which should not be counted in the server statistics
- `interval` (Number) Time period for server statistics rotation, in hours. Defaults to `24` (1 day)


<a id="nestedatt--tls"></a>
### Nested Schema for `tls`

Required:

- `certificate_chain` (String) The certificates chain. Supply either a path to a file or a base64 encoded string of the certificates chain in PEM format
- `enabled` (Boolean) Whether encryption (DoT/DoH/HTTPS) is enabled
- `private_key` (String) The private key. Supply either a path to a file or a base64 encoded string of the private key in PEM format
- `server_name` (String) The hostname of the TLS/HTTPS server

Optional:

- `force_https` (Boolean) When `true`, forces HTTP-to-HTTPS redirect. Defaults to `false`
- `port_dns_over_quic` (Number) The DNS-over-Quic (DoQ) port. Set to `0` to disable. Defaults to `853`
- `port_dns_over_tls` (Number) The DNS-over-TLS (DoT) port. Set to `0` to disable. Defaults to `853`
- `port_https` (Number) The HTTPS port. Set to `0` to disable. Defaults to `443`

Read-Only:

- `dns_names` (List of String) The value of SubjectAltNames field of the first certificate in the chain
- `issuer` (String) The issuer of the first certificate in the chain
- `key_type` (String) The private key type, either `RSA` or `ECDSA`
- `not_after` (String) The NotAfter field of the first certificate in the chain
- `not_before` (String) The NotBefore field of the first certificate in the chain
- `private_key_saved` (Boolean) Whether the user has previously saved a private key
- `subject` (String) The subject of the first certificate in the chain
- `valid_cert` (Boolean) Whether the specified certificates chain is a valid chain of X.509 certificates
- `valid_chain` (Boolean) Whether the specified certificates chain is verified and issued by a known CA
- `valid_key` (Boolean) Whether the private key is valid
- `valid_pair` (Boolean) Whether both certificate and private key are correct
- `warning_validation` (String) The validation warning message with the issue description

## Import

Import is supported using the following syntax:

```shell
# DNS config can be imported by specifying the ID as `1`
# NOTE: there can only be 1 (one) `adguard_dns_config` resource, hence the hardcoded ID
terraform import adguard_dns_config.test "1"
```
